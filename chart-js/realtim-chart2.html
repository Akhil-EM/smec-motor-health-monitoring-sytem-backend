<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Chart</title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@3.3.2"></script>
	<script src="https://cdn.jsdelivr.net/npm/luxon@1.27.0"></script>
	<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.0.0"></script>
	<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-streaming@2.0.0"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0/dist/chartjs-plugin-annotation.min.js"></script>
</head>

<body>
	<div style="height: 400px;width:600px;display:flex;">
		<canvas id="myChart"></canvas>
		<canvas id="myChart2"></canvas>
	</div>
	
	<p>0% <input type="range" max="100" min="0" id="input-range"> 100%</p>
</body>
<script>
	function getRndInteger(min, max) {
		return Math.floor(Math.random() * (max - min)) + min;
	}

	const ctx1 = document.getElementById('myChart');
	const chart = new Chart(ctx1, {

		type: 'line',
		data: {
			labels: [],
			datasets: [{
				label: '# of Votes',
				data: [],
				borderWidth: 1,
				borderColor: 'rgb(75, 192, 192)',
			}
			]
		},
		options: {
			responsive: true,
			maintainAspectRatio: false,
			width: '60%',
			tension: 0.4,
			scales: {
				x: {
					type: 'realtime',
					realtime: {
						onRefresh: function (chart) {
							const randInt = getRndInteger(-100, 100);
							chart.data.datasets[0].data.push({
								x: Date.now(),
								y: randInt
							});
						}
					}
				}
			},
			plugins: {
				annotation: {
					annotations: {
						line1: {
							type: 'line',
							yMin: 0,
							yMax: 0,
							borderColor: 'rgb(255, 99, 132)',
							borderWidth: 2,
							label: {
								content: 'upper limit',
								enabled: true,
								backgroundColor: 'rgba(255, 99, 133, 0.397)',
								color: 'white',
							},
						},
						line2: {
							type: 'line',
							yMin: 0,
							yMax: 0,
							borderColor: 'rgb(255, 99, 132)',
							borderWidth: 2,
							label: {
								content: 'lower limit',
								enabled: true,
								backgroundColor: 'rgba(255, 99, 133, 0.397)',
								color: 'white',
							},
						},
					}
				}
			}
		}
	});

	const range = document.getElementById("input-range");
	range.addEventListener('input', function () {
		const value = this.value;
		chart.options.plugins.annotation.annotations.line1.yMin = value;
		chart.options.plugins.annotation.annotations.line1.yMax = value;
		chart.options.plugins.annotation.annotations.line2.yMin = -value;
		chart.options.plugins.annotation.annotations.line2.yMax = -value;

		chart.update();

	})
</script>

</html>